webpackJsonp([1],{0:function(e,t){},"0bRM":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("7+uW"),a=n("NYxO"),o={name:"App",data:function(){return{userName:""}},computed:{channels:function(){return this.$store.state.channels},user:function(){return this.$store.state.user}},created:function(){var e=window.sessionStorage.getItem("vlackUser");e&&this.$store.commit("setUser",e),this.getChannels()},methods:{getChannels:function(){var e=this;this.$axios.get("/channel").then(function(t){e.$store.commit("setChannels",t.data)})},login:function(){this.$store.commit("setUser",this.userName)}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e.user?[n("div",{staticClass:"sidebar"},[n("h3",[e._v(e._s(e.user))]),e._v(" "),n("h4",[e._v("Channels")]),e._v(" "),n("router-link",{staticClass:"new-channel-link",attrs:{to:"/channel/new"}},[n("i",{staticClass:"fas fa-plus-square"})]),e._v(" "),e._l(e.channels,function(t){return n("router-link",{key:t.id,attrs:{to:{name:"Channel",params:{id:t.id}}}},[e._v("\n        # "+e._s(t.name)+"\n      ")])})],2),e._v(" "),n("div",{staticClass:"content"},[n("router-view")],1)]:[n("div",{staticClass:"sign-in-form"},[n("h1",[e._v("Sign In")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.userName,expression:"userName"}],attrs:{type:"text"},domProps:{value:e.userName},on:{input:function(t){t.target.composing||(e.userName=t.target.value)}}}),n("br"),e._v(" "),n("button",{attrs:{disabled:""===e.userName},on:{click:function(t){e.login()}}},[e._v("Login")])])]],2)},staticRenderFns:[]},i=n("VU/8")(o,r,!1,null,null,null).exports,c=n("/ocq"),l={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"hello"},[t("h1",[this._v("Welcome To Vlack!")])])}]},u=n("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},l,!1,null,null,null).exports,h={name:"ChannelForm",data:function(){return{channelName:""}},created:function(){console.log(this.$store)},methods:{createChannel:function(){var e=this;this.$axios.post("/channel",{Name:this.channelName}).then(function(t){e.$store.commit("addChannel",t.data),e.$router.push("/")})}}},m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"new-channel-form"},[n("h1",[e._v("New Channel: "+e._s(e.channelName))]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.channelName,expression:"channelName"}],attrs:{type:"text"},domProps:{value:e.channelName},on:{input:function(t){t.target.composing||(e.channelName=t.target.value)}}}),e._v(" "),n("button",{attrs:{disabled:""===e.channelName},on:{click:e.createChannel}},[e._v("Create")])])},staticRenderFns:[]},d=n("VU/8")(h,m,!1,null,null,null).exports,p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"message",class:{starred:e.message.starred}},[n("b",[e._v(e._s(e.message.user))]),e._v(" "),n("span",[e._v(e._s(e.message.createdAt))]),e._v(" "),n("p",[e._v(e._s(e.message.body))]),e._v(" "),n("a",{on:{click:e.star}},[n("i",{staticClass:"far fa-star"})])])},staticRenderFns:[]},v={name:"Channel",data:function(){return{name:null,id:null,messages:[],newMessage:"",socketConnection:null}},watch:{$route:function(){this.getChannel()},messages:function(){var e=this;setTimeout(function(){e.$el.querySelector(".messages").scrollTo(0,1e7)},100)}},created:function(){this.getChannel()},beforeRouteUpdate:function(e,t,n){this.socketConnection.stop(),n()},beforeRouteLeave:function(e,t,n){this.socketConnection.stop(),n()},methods:{setupSocket:function(){var e=this,t=this.$signalR.TransportType.WebSockets;this.socketConnection=new this.$signalR.HubConnection("http://localhost:5000/socket?channel_id="+this.id,{transport:t}),this.socketConnection.on("broadcastMessage",function(t,n){e.messages.push(n)}),this.socketConnection.start()},createMessage:function(){var e=this;if(""!==this.newMessage){var t={user:this.$store.state.user,body:this.newMessage,ChannelId:this.id};this.$axios.post("/message",t).then(function(t){e.newMessage=""})}},getChannel:function(){var e=this;this.$axios.get("/channel/"+this.$route.params.id).then(function(t){e.name=t.data.name,e.id=t.data.id,e.messages=t.data.messages,e.setupSocket()})},starMessage:function(e){this.messages[e].starred=!0}},components:{message:n("VU/8")({name:"Message",props:["message"],methods:{star:function(){this.$emit("star")}}},p,!1,null,null,null).exports}},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"channel"},[n("div",{staticClass:"channel-header"},[n("h3",[e._v("# "+e._s(e.name))])]),e._v(" "),n("div",{staticClass:"messages"},e._l(e.messages,function(t,s){return n("message",{key:t.id,attrs:{message:t},on:{star:function(t){e.starMessage(s)}}})})),e._v(" "),n("div",{staticClass:"new-message"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],attrs:{placeholder:"New Message in #"+e.name},domProps:{value:e.newMessage},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;t.preventDefault(),e.createMessage()},input:function(t){t.target.composing||(e.newMessage=t.target.value)}}})])])},staticRenderFns:[]},g=n("VU/8")(v,f,!1,null,null,null).exports;s.a.use(c.a);var _=new c.a({routes:[{path:"/",name:"HelloWorld",component:u},{path:"/channel/new",name:"ChannelForm",component:d},{path:"/channel/:id",name:"Channel",component:g}]}),C=n("mtWM"),w=n.n(C),k=n("XujC"),$={state:{channels:[],user:null},mutations:{setChannels:function(e,t){e.channels=t},addChannel:function(e,t){e.channels.push(t)},setUser:function(e,t){e.user=t,window.sessionStorage.setItem("vlackUser",t)},clearUser:function(e){window.sessionStorage.clear("vlackUser")}}};s.a.prototype.$axios=w.a.create({baseURL:"http://localhost:5000/api"}),s.a.prototype.$signalR=k,n("0bRM"),s.a.config.productionTip=!1,s.a.use(a.a);var N=new a.a.Store($);new s.a({el:"#app",router:_,store:N,components:{App:i},template:"<App/>"})}},["NHnr"]);
//# sourceMappingURL=app.a2e324a736df995345d6.js.map